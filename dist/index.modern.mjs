import{Controller as e}from"@hotwired/stimulus";import"@kanety/stimulus-static-actions";class t extends e{get input(){return this.scope.findElement("input[type=file]")}paste(e){if(this.element!=document.activeElement)return;let t=this.input,i=this.convertToFiles(e.clipboardData),l=this.buildDataTransfer(i,t.multiple);l.files.length&&(t.disabled||(this.setFiles(t,l.files),document.activeElement.blur()),e.preventDefault())}convertToFiles(e){let t=[];return Array.from(e.items).forEach(i=>{if("file"==i.kind)t.push(i.getAsFile(i.type));else{let l=e.getData(i.type),s=this.filenameFor(i.type);s&&t.push(this.convertToFile(l,s,i.type))}}),t}filenameFor(e){return this.textToFileValue[e]||this.textToFileValue["*"]}convertToFile(e,t,i){let l=new Blob([e],{type:i});return new File([l],t,{type:i})}buildDataTransfer(e,t){let i=new DataTransfer;return e.forEach(e=>{(t||i.items.length<1)&&i.items.add(e)}),i}setFiles(e,t){e.files=t,e.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),e.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0})),this.dispatch("pasted",{detail:{files:t}})}}t.values={textToFile:Object},t.actions=[["element","paste->paste"]];export{t as default};
//# sourceMappingURL=index.modern.mjs.map
