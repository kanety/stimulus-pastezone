{"version":3,"file":"index.umd.js","sources":["../src/index.js"],"sourcesContent":["import { Controller } from '@hotwired/stimulus';\nimport '@kanety/stimulus-static-actions';\n\nexport default class extends Controller {\n  static actions = [\n    ['element', 'paste->paste']\n  ];\n\n  get input() {\n    return this.scope.findElement('input[type=file]');\n  }\n\n  paste(e) {\n    if (this.element.contains(document.activeElement)) {\n      let input = this.input;\n      let files = this.findFiles(e.clipboardData.items, input.multiple);\n      if (files.length && !input.disabled) {\n        input.files = files;\n        input.dispatchEvent(new Event('input', { bubbles: true, cancelable: true }));\n        input.dispatchEvent(new Event('change', { bubbles: true, cancelable: true }));\n        this.dispatch('pasted', { detail: { files: files } });\n        document.activeElement.blur();\n      }\n    }\n    e.preventDefault();\n  }\n\n  findFiles(items, multiple) {\n    let files = Array.from(items).filter(item => item.kind == 'file').map(item => item.getAsFile(item.type));\n    let dt = new DataTransfer();\n    files.forEach(file => {\n      if (multiple || dt.items.length < 1) {\n        dt.items.add(file);\n      }\n    });\n    return dt.files;\n  }\n}\n"],"names":["Controller","input","scope","findElement","paste","e","this","element","contains","document","activeElement","files","findFiles","clipboardData","items","multiple","length","disabled","dispatchEvent","Event","bubbles","cancelable","dispatch","detail","blur","preventDefault","Array","from","filter","item","kind","map","getAsFile","type","dt","DataTransfer","forEach","file","add","actions"],"mappings":"gYAG6BA,aAKvBC,YACF,YAAYC,MAAMC,YAAY,oBAGhCC,MAAMC,GACJ,GAAIC,KAAKC,QAAQC,SAASC,SAASC,eAAgB,CACjD,IAAIT,EAAQK,KAAKL,MACbU,EAAQL,KAAKM,UAAUP,EAAEQ,cAAcC,MAAOb,EAAMc,UACpDJ,EAAMK,SAAWf,EAAMgB,WACzBhB,EAAMU,MAAQA,EACdV,EAAMiB,cAAc,IAAIC,MAAM,QAAS,CAAEC,SAAS,EAAMC,YAAY,KACpEpB,EAAMiB,cAAc,IAAIC,MAAM,SAAU,CAAEC,SAAS,EAAMC,YAAY,KACrEf,KAAKgB,SAAS,SAAU,CAAEC,OAAQ,CAAEZ,MAAOA,KAC3CF,SAASC,cAAcc,QAG3BnB,EAAEoB,iBAGJb,UAAUE,EAAOC,GACf,IAAIJ,EAAQe,MAAMC,KAAKb,GAAOc,OAAOC,GAAqB,QAAbA,EAAKC,MAAgBC,IAAIF,GAAQA,EAAKG,UAAUH,EAAKI,OAC9FC,EAAK,IAAIC,aAMb,OALAxB,EAAMyB,QAAQC,KACRtB,GAAYmB,EAAGpB,MAAME,OAAS,IAChCkB,EAAGpB,MAAMwB,IAAID,KAGVH,EAAGvB,gBA/BL4B,QAAU,CACf,CAAC,UAAW"}